# ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œ(static factory method)ë€?

ë³´í†µ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ëŠ” ì „í˜•ì ì¸ ìˆ˜ë‹¨ì€ public ìƒì„±ìë¥¼ í†µí•œ ì¸ìŠ¤í„´ìŠ¤í™”ì´ë‹¤. í•˜ì§€ë§Œ, ê·¸ í´ë˜ìŠ¤ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ëŠ” ì •ì  ë©”ì†Œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤. ì´ê²ƒì„ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œë¼ê³  í•œë‹¤. static ë©”ì†Œë“œë¡œ ê°ì²´ ìƒì„±ì„ ìº¡ìŠí™”í•œë‹¤. ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œëŠ” íŒ©ì†Œë¦¬ ë©”ì†Œë“œ íŒ¨í„´ê³¼ëŠ” ë‹¤ë¥´ë‹¤.

```java
// java BigIntegerì˜ ì†ŒìŠ¤ì½”ë“œ
public class BigInteger extends Number implements Comparable<BigInteger> {
    //...
    private static BigInteger posConst[] = new BigInteger[MAX_CONSTANT+1];
    private static BigInteger negConst[] = new BigInteger[MAX_CONSTANT+1];
    //...
    public static BigInteger valueOf(long val) {
        // If -MAX_CONSTANT < val < MAX_CONSTANT, return stashed constant
        if (val == 0)
            return ZERO;
        if (val > 0 && val <= MAX_CONSTANT)
            return posConst[(int) val];
        else if (val < 0 && val >= -MAX_CONSTANT)
            return negConst[(int) -val];

        return new BigInteger(val);
    }
}
```

## íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´(Factory Method Design Pattern)ì´ë€?

ê°ì²´ë¥¼ ë§Œë“¤ì–´ ë‚´ëŠ” ì²˜ë¦¬ë¥¼ ì„œë¸Œí´ë˜ìŠ¤ë¡œ ë¶„ë¦¬í•˜ëŠ” íŒ¨í„´ì´ë‹¤.  í´ë˜ìŠ¤ ê°„ì˜ ê²°í•©ë„ë¥¼ ë‚®ì¶° ë³€í™”ì— ë” ìœ ì—°í•˜ê²Œ ëŒ€ì‘í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

```java
public abstract class Pizza {
    public abstract String getName();
}

public class CheesePizza extends Pizza {
    @Override
    public String getName() {
        return "Chee~~~se";
    }
}

public class SeafoodPizza extends Pizza {
    @Override
    public String getName() {
        return "Sea~~~food";
    }
}

public class PizzaFactory {
    public Pizza makePizza(String name) {
        if (name.equals("cheese")) {
            return new CheesePizza();
        }
        if (name.equals("seafood")) {
            return new SeafoodPizza();
        }
        return null;
    }
}
```

# ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œì˜ ì¥ì 

## 1. ì´ë¦„(Naming)ì„ ì§€ì„ ìˆ˜ ìˆë‹¤.

íŠ¹ì„±ì„ ì˜ ë“œëŸ¬ë‚´ëŠ” ì´ë¦„ì„ ì§€ì–´ ê°€ë…ì„±ì„ ë†’ì¼ ìˆ˜ ìˆë‹¤. ë‹¨ìˆœí•œ ìƒì„±ìë¡œëŠ” ì„¤ëª…í•˜ê¸° ì–´ë ¤ìš´ íŠ¹ì§•ì„ ì´ë¦„ìœ¼ë¡œ ë‚˜íƒ€ë‚¼ ìˆ˜ ìˆë‹¤.

ìƒì„±ìë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“œëŠ” ë°©ì‹ì„ ë‹¤ë¥´ê²Œ í•˜ë ¤ë©´ ë‹¤ë¥¸ ì‹œê·¸ë‹ˆì²˜ë¥¼ ì‚¬ìš©í•´ì•¼ í•œë‹¤. í•˜ì§€ë§Œ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•œë‹¤ë©´ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì§€ì–´ì¤€ë‹¤ë©´ ê°™ì€ ì…ë ¥ ë§¤ê°œë³€ìˆ˜ë¥¼ ê°€ì ¸ë„ ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì´ ê°€ëŠ¥í•˜ë‹¤.

```java
public class Car {
    private static final int CONDITION = 4;

    private final String team;
    private final String color;

    private int position;

    public Car(String team, int position, String color) {
        this.team = team;
        this.color = color;
        this.position = position;
    }

    public static Car teamCar(String team){
        return new Car(team, 0, "Black");
    }

    public static Car leadCar(int position){
        return new Car("A", position, "Black");
    }

    public static Car colorCar(String color){
        return new Car("A", 0, color);
    }

}
```

## 2. ë¶ˆí•„ìš”í•œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ í”¼í•  ìˆ˜ ìˆê³  ì¸ìŠ¤í„´ìŠ¤ í†µì œê°€ ê°€ëŠ¥í•˜ë‹¤.

ë¶ˆë³€ ê°ì²´ë¥¼ ìºì‹œí•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆë‹¤ë©´ êµ³ì´ newë¥¼ ì‚¬ìš©í•´ì„œ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë§Œë“¤ì§€ ì•Šì•„ë„ ëœë‹¤.

```java
public class Position {
    private static final Position ZERO = new Position(0);
    private final int position;

    public Position(int position) {
        this.position = position;
    }

    public static Position getZeroPosition(){
        return ZERO;
    }
}
```

### ë¶ˆë³€ í´ë˜ìŠ¤ë€?

ëŒ€í‘œì ì¸ ë¶ˆí¸ í´ë˜ìŠ¤ëŠ” Stringì´ë‹¤. í´ë˜ìŠ¤ë¥¼ ë¶ˆë³€ìœ¼ë¡œ ë§Œë“œë ¤ë©´ ë‹¤ìŒ ë‹¤ì„¯ê°€ì§€ ê·œì¹™ì„ ë”°ë¥´ë©´ ëœë‹¤.

1. ê°ì²´ ìƒíƒœë¥¼ ë³€ê²½í•˜ëŠ” ë©”ì†Œë“œë¥¼ ì œê³µí•˜ì§€ ì•ŠëŠ”ë‹¤.
2. í´ë˜ìŠ¤ë¥¼ í™•ì¥í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.
3. ëª¨ë“  í•„ë“œë¥¼ final ì„ ì–¸í•œë‹¤.
4. ëª¨ë“  í•„ë“œë¥¼ private ì„ ì–¸í•œë‹¤.
5. ìì‹  ì´ì™¸ì—ëŠ” ê°€ë³€ ì»´í¬ë„ŒíŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ì—†ë„ë¡ í•œë‹¤.

ë¶ˆë³€ ê°ì²´ëŠ” ìƒì„±~ì‚­ì œê¹Œì§€ ìƒíƒœë¥¼ ê·¸ëŒ€ë¡œ ê°€ì§€ëŠ” ê°ì²´ë¥¼ ì˜ë¯¸í•œë‹¤. ê°’ì´ ë³€í™”ëœë‹¤ë©´ ë¶ˆë³€ ê°ì²´ëŠ” ìƒˆë¡œ ìƒì„±ë˜ì–´ì•¼ í•œë‹¤. í•´ë‹¹ ê°ì²´ì˜ ìƒíƒœê°€ ë³€í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì•ˆì „í•˜ê²Œ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

### í”Œë¼ì´ ì›¨ì´íŠ¸ íŒ¨í„´?

ë™ì¼í•˜ê±°ë‚˜ ìœ ì‚¬í•œ ê°ì²´ë“¤ ì‚¬ì´ì— ê°€ëŠ¥í•œ ë§ì€ ë°ì´í„°ë¥¼ ì„œë¡œ ê³µìœ í•˜ì—¬ ì‚¬ìš©í•˜ë„ë¡ í•˜ì—¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰ì„ ìµœì†Œí™”í•˜ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ë””ìì¸ íŒ¨í„´ì´ë‹¤. poolì„ ì‚¬ìš©í•˜ì—¬ ê°ì²´ê°€ ìˆë‹¤ë©´ ì‚¬ìš©í•˜ê³ , ì—†ë‹¤ë©´ ìƒˆë¡œ ë§Œë“œëŠ” ë°©ì‹ì´ë‹¤. ê°€ì¥ ëŒ€í‘œì ì¸ ê²ƒì´ StringPoolì´ë‹¤.

### ì¸ìŠ¤í„´ìŠ¤ í†µì œ ë°©ë²•

- ì‹±ê¸€í„´: ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì˜¤ì§ í•˜ë‚˜ë§Œ ìƒì„±í•  ìˆ˜ ìˆëŠ” í´ë˜ìŠ¤ë¥¼ ë§í•œë‹¤. ì„¤ê³„ìƒ ìœ ì¼í•´ì•¼ í•˜ëŠ” ê²½ìš° í•„ìš”í•˜ë‹¤. private static finalë¡œ í•˜ë‚˜ì˜ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•´ë‘ê³ , private ìƒì„±ìë¡œ ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ ë§‰ëŠ”ë‹¤. ë§Œë“¤ì–´ì§„ 1ê°œì˜ ì¸ìŠ¤í„´ìŠ¤ëŠ” public ë©”ì†Œë“œë¡œ ê·¸ ì¸ìŠ¤í„´ìŠ¤ì— ì ‘ê·¼í•œë‹¤. í…ŒìŠ¤íŠ¸ ì‘ì„±ì´ ì–´ë ¤ìš´ ë‹¨ì ì´ ìˆë‹¤ê³  í•œë‹¤.Â Enum ë°©ì‹ì´ ì‹±ê¸€í„´ì„ ë§Œë“œëŠ” ê°€ì¥ ì•ˆì „í•˜ê³  ì¢‹ì€ ë°©ë²•ì´ë¼ê³  í•œë‹¤.
- ì¸ìŠ¤í„´ìŠ¤í™” ë¶ˆê°€ : private ìƒì„±ìë¡œ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ì—ì„œ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±ì„ ë§‰ì„ ìˆ˜ ìˆë‹¤.

## 3. ë°˜í™˜íƒ€ì…ì˜ í•˜ìœ„ íƒ€ì… ê°ì²´ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆë‹¤.

java.util.Collectionsì—ì„œëŠ” ì¸ìŠ¤í„´ìŠ¤í™” ë¶ˆê°€í•œ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„ì²´ë¥¼ ì–»ì„ ìˆ˜ ìˆê²Œ í–ˆë‹¤. ì•„ë˜ì˜ ì˜ˆì‹œëŠ” java.util.Collections ì¤‘ ì¼ë¶€ì´ë‹¤. static ë©”ì†Œë“œë¡œ ìƒì„±í•˜ê³ , ë‚´ë¶€ì— í•´ë‹¹ í´ë˜ìŠ¤ë¥¼ ìˆ¨ê²¨ ê°„ë‹¨í•œ API ë©”ì†Œë“œë¡œ í•´ë‹¹ í´ë˜ìŠ¤ì˜ ìƒì„±ì„ ì´ìš©í•œë‹¤.

```java
// java.util.Collections ì†ŒìŠ¤ì½”ë“œ
    public static <T> Set<T> unmodifiableSet(Set<? extends T> s) {
        return new UnmodifiableSet<>(s);
    }
    
    static class UnmodifiableSet<E> extends UnmodifiableCollection<E>
                                 implements Set<E>, Serializable {
        private static final long serialVersionUID = -9215047833775013803L;

        UnmodifiableSet(Set<? extends E> s)     {super(s);}
        public boolean equals(Object o) {return o == this || c.equals(o);}
        public int hashCode()           {return c.hashCode();}
    }
```

## 4. ì…ë ¥ ë§¤ê°œë³€ìˆ˜ì— ë”°ë¼ ë§¤ë²ˆ ë‹¤ë¥¸ í´ë˜ìŠ¤ ê°ì²´ë¥¼ ë°˜í™˜ ê°€ëŠ¥í•˜ë‹¤.

ì´í™í‹°ë¸Œ ìë°” ì±…ì—ì„œëŠ” EnumSetì´ ì˜ˆì‹œë¡œ ë‚˜ì˜¨ë‹¤. EnumSetì˜ ë§¤ê°œë³€ìˆ˜ ê°¯ìˆ˜ì— ë”°ë¼ ë‹¤ë¥¸ íƒ€ì…ì˜ EnumSet ê°ì²´ë¥¼ ë°˜í™˜í•œë‹¤ê³  í•œë‹¤. ì•„ë˜ëŠ” í•´ë‹¹ ë‚´ìš©ì„ ë³´ê³  ìƒê°í•œ ì˜ˆì‹œì´ë‹¤.

```java
class Order {
		private static final int GROUP_ORDER = 30;

    public static Order order(int amount) {
        if (amount < GROUP_ORDER) {
            return new normalOrder(amount);
        }
        return new groupOrder(amount);
    }
}
```

## 5. ì •ì  íŒ©í„°ë¦¬ ë©”ì†Œë“œë¥¼ ì‘ì„±í•˜ëŠ” ì‹œì ì—ëŠ” ë°˜í™˜í•  ê°ì²´ì˜ í´ë˜ìŠ¤ê°€ ì¡´ì¬í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.

ìœ„ì—ì„œ ì‘ì„±í•œ Position í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ì´ˆê¸°í™” í•˜ë ¤ê³  í•  ë•Œ, Positionì˜ ì¸ìŠ¤í„´ìŠ¤ê°€ ë§Œë“¤ì–´ì ¸ ìˆì§€ ì•Šì•„ë„, Position.getZeroPosition()ìœ¼ë¡œ Position í´ë˜ìŠ¤ë¥¼ ì‚¬ìš©ê°€ëŠ¥í•˜ë‹¤.

```java
public class Car{
    private Position position;

    public Car(String carNameValue) {
        this(carNameValue, Position.getZeroPosition());
    }
}
```

# ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œì˜ ë‹¨ì 

## 1. ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œë§Œ ì œê³µí•˜ì—¬ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ìƒì„±í•˜ë©´ í•˜ìœ„ í´ë˜ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ì—†ë‹¤.

public, protected ìƒì„±ì ì—†ì´ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œë§Œ ì‚¬ìš©í•˜ë©´ í•˜ìœ„ í´ë˜ìŠ¤(ìƒì†)ì„ ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ìƒì†ì´ ë˜ë©´ ì•ˆë˜ëŠ” ê²½ìš°ì—ëŠ” ì¥ì ìœ¼ë¡œ ì—¬ê²¨ì§ˆ ìˆ˜ë„ ìˆë‹¤.

## 2. ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œëŠ” í”„ë¡œê·¸ë˜ë¨¸ê°€ ì°¾ê¸° ì–´ë µë‹¤.

í”„ë¡œê·¸ë˜ë¨¸ê°€ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œë¡œ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ëŠ” ë°©ë²•ì„ ì•Œê¸° ì–´ë µë‹¤. ë”°ë¼ì„œ í”íˆ ì‚¬ìš©í•˜ëŠ” ëª…ëª… ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬ ì´ë¦„ì„ ì§€ì–´ì£¼ëŠ”ê²Œ ì¢‹ë‹¤.

### í”íˆ ì‚¬ìš©í•˜ëŠ” ëª…ëª…(Naming) ë°©ì‹

- from : í•˜ë‚˜ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ í•´ë‹¹ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
- of : ì—¬ëŸ¬ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ì•„ ì í•©í•œ íƒ€ì…ì˜ ì¸ìŠ¤í„´ìŠ¤ ë°˜í™˜
- valueOf : fromê³¼ ofì˜ ë” ìì„¸í•œ ë²„ì „
- instance í˜¹ì€ getInstance : ë§¤ê°œë³€ìˆ˜ë¡œ ëª…ì‹œí•œ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•˜ì§€ë§Œ, ê°™ì€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë³´ì¥í•˜ì§„ ì•ŠìŒ
- create í˜¹ì€ newInstance : ìœ„ì™€ ê°™ì§€ë§Œ ë§¤ë²ˆ ìƒˆë¡œìš´ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ë°˜í™˜í•¨
- get*Type* : getInstanceì™€ ê°™ì§€ë§Œ ìƒì„±í•  í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— íŒ©í„°ë¦¬ ë©”ì†Œë“œë¥¼ ì •ì˜í•  ë•Œ ì‚¬ìš© (*Type*ì€ ë°˜í™˜í•  ê°ì²´ì˜ íƒ€ì…)
- new*Type* : newInstanceì™€ ê°™ì§€ë§Œ ìƒì„±í•  í´ë˜ìŠ¤ê°€ ì•„ë‹Œ ë‹¤ë¥¸ í´ë˜ìŠ¤ì— íŒ©í„°ë¦¬ ë©”ì†Œë“œë¥¼ ì •ì˜í•  ë•Œ ì‚¬ìš© (*Type*ì€ ë°˜í™˜í•  ê°ì²´ì˜ íƒ€ì…)
- *Type* :  get*Type* , new*Type* ì˜ ê°„ê²°í•œ ë²„ì „

# ì •ë¦¬

ê°„ë‹¨íˆ ì •ë¦¬í•˜ë©´ ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œëŠ” staticìœ¼ë¡œ ì„ ì–¸ë˜ì–´ ê°ì²´ë¥¼ ë°˜í™˜í•˜ëŠ” ë©”ì†Œë“œì´ë‹¤. ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ í•˜ëŠ”ë° ìˆì–´ ë‹¤ì–‘í•œ ì¥ì ì´ ìˆì–´ ì‚¬ìš©ëœë‹¤.

ìˆ˜ì—…ì‹œê°„ì— ë‚˜ì˜¨ í‚¤ì›Œë“œë¥¼ ë” ì•Œì•„ë³´ê³  ì‹¶ì–´ì„œ í•´ë‹¹ ë‚´ìš©ì„ ì°¾ì•„ë³´ê²Œ ë˜ì—ˆë‹¤. ì´ ë‚´ìš©ì„ ì´í•´í•˜ê¸° ìœ„í•´ì„œëŠ” ë„ˆë¬´ ì—¬ëŸ¬ ê°œë…ì´ ì„ì—¬ìˆì–´ ì´í•´í•˜ê¸°ê°€ ì–´ë ¤ì› ë‹¤. ğŸ˜… ì¤‘ê°„ì— ë‚˜ì˜¤ëŠ” ê°œë…ë“¤ì„ ê°„ë‹¨í•˜ê²Œ ì •ë¦¬í•˜ë©´ì„œ ê°™ì´ ì´í•´í•˜ë ¤ê³  ë…¸ë ¥í–ˆë‹¤. ì˜ˆì‹œê°€ ì ì ˆí•˜ì§€ ì•Šë‹¤ê±°ë‚˜ ì œëŒ€ë¡œ ì´í•´í•˜ê³  ìˆëŠ” ë¶€ë¶„ì´ ë§ì„ ìˆ˜ ìˆìœ¼ë‹ˆ ìˆë‹¤ë©´ ì½”ë©˜íŠ¸ ë¶€íƒë“œë¦½ë‹ˆë‹¤.

# References

ì´í™í‹°ë¸Œ ìë°”(ì±…)

[íŒ©í† ë¦¬ ë©”ì†Œë“œ íŒ¨í„´ ì°¸ê³  ë¸”ë¡œê·¸](https://jdm.kr/blog/180)

[ì •ì  íŒ©í† ë¦¬ ë©”ì†Œë“œ ì°¸ê³  ë¸”ë¡œê·¸](https://johngrib.github.io/wiki/static-factory-method-pattern/)

[í”Œë¼ì´ ì›¨ì´íŠ¸ íŒ¨í„´ ì°¸ê³  ë¸”ë¡œê·¸](https://m.blog.naver.com/2feelus/220669069127)

[í”Œë¼ì´ì›¨ì´íŠ¸ íŒ¨í„´ ìœ„í‚¤](http://ko.wikipedia.org/wiki/%ED%94%8C%EB%9D%BC%EC%9D%B4%EC%9B%A8%EC%9D%B4%ED%8A%B8_%ED%8C%A8%ED%84%B4)