# HTTP λ©”μ„λ“μ™€ URI μ„¤κ³„



## π”—HTTP λ©”μ„λ“ 

1. PUT

- λ¦¬μ†μ¤λ¥Ό λ€μ²΄ν•λ‹¤
  - λ¦¬μ†μ¤κ°€ μ΄λ―Έ μ΅΄μ¬ν•λ‹¤? -> λ€μ²΄
  - λ¦¬μ†μ¤κ°€ μ—†λ‹¤? -> μƒμ„±
  - λ®μ–΄μ“°κΈ°λΌκ³  λ³΄λ©΄ λ¨

```json
PUT /members/100 HTTP/1.1
Content-Type application/json

{
  "username": "hello",
  "age": 20
}
```



- POSTμ™€ ν° μ°¨μ΄μ μ€ ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤λ¥Ό μ΄λ―Έ μ•κ³  μμ
- μ„ μμ μ—μ„λ” μ•„μ΄λ””κ°€ 100μΈ νμ›(member) λ¦¬μ†μ¤κ°€ νΉμ •λμ—λ‹¤.



λ§μ•½, λ‹¤μκ³Ό κ°™μ΄ μΌλ¶€ ν•„λ“λ§ λ„£μ–΄ μ”μ²­ν•λ©΄ μ–΄λ–»κ² λ κΉ? 

```
PUT /members/100 HTTP/1.1
Content-Type application/json

{
  "age": 20
}
```

κΈ°μ΅΄ λ¦¬μ†μ¤λ¥Ό μ™„μ „ν λ€μ²΄ν•λ―€λ΅ **usernameν•„λ“λ” μ‚¬λΌμ§„λ‹¤.**



κΈ°μ΅΄ λ¦¬μ†μ¤λ¥Ό μ™„μ „ν λ€μ²΄ν•λ―€λ΅ μ‚¬μ©ν•κΈ° μ–΄λ ¤μ΄μ μ΄ μμ„ μ μλ‹¤.



2. PATCH

- λ¦¬μ†μ¤λ¥Ό λ¶€λ¶„ λ³€κ²½ν•λ‹¤.



```
# μ”μ²­ λ©”μ‹μ§€
PUT /members/100 HTTP/1.1
Content-Type application/json

{
  "age": 20
}
```

```
# λ³€κ²½ κ²°κ³Ό
{
  "username": "hello",
  "age": 20
}
```





## HTTP λ©”μ„λ“μ μ†μ„±

![1629418100051](images/1629418100051.png)

[μ¶μ²: https://ko.wikipedia.org/wiki/HTTP]



- μ•μ „μ€ λ¬΄μ¨ μλ―ΈμΌκΉ?
- λ©±λ“±μ΄λ€ λ¬΄μ¨ λ»μΌκΉ?
- μΊμ‹κ°€λ¥μ΄λ€?



### π‘· μ•μ „(Safe Methods)

- νΈμ¶ν•΄λ„ λ¦¬μ†λ¥Ό λ³€κ²½ν•μ§€ μ•λ”λ‹¤.
- μ—¬λ¬λ² νΈμ¶ ν•΄λ„ λ³€κ²½μ΄ μΌμ–΄λ‚μ§€ μ•λ”λ‹¤λ©΄ μ•μ „ν•λ‹¤κ³  νλ‹¨ν•λ‹¤.



### π“λ©±λ“±(Idempotent)

- f(f(x)) = f(x)
- κ³„μ† νΈμ¶ν•΄λ„ κ²°κ³Όκ°€ κ°™λ‹¤.
  - GET: μ—¬λ¬ λ² μ΅°νλ¥Ό ν•΄λ„ μ΅°ν κ²°κ³Όλ” κ°™λ‹¤.
  - PUT: κ°™μ€ μ”μ²­μ„ μ—¬λ¬λ² ν•΄λ„ κ²°κ³Όλ” κ°™λ‹¤.
  - DELETE: κ°™μ€ μ”μ²­μ„ μ—¬λ¬λ² ν•΄λ„ ν•΄λ‹Ή λ¦¬μ†μ¤λ§ μ‚­μ λλ‹¤.
  - POST: λ©±λ“±μ΄ μ•„λ‹λ‹¤. λ‘λ² νΈμ¶ν•λ©΄ κ°™μ€ λ¦¬μ†μ¤κ°€ μ¤‘λ³µν•μ—¬ μƒμ„±λλ‹¤.



> Q) μ¬μ”μ²­ μ¤‘κ°„μ— λ„κµ°κ°€ λ¦¬μ†μ¤λ¥Ό λ³€κ²½ν•λ‹¤λ©΄?
>
> μμ‹
>
> - μ‚¬μ©μ1: GET -> username:A, aget:20
> - μ‚¬μ©μ2: POST -> username:A, aget:30
> - μ‚¬μ©μ1: GET -> username:A, aget:30 (μ‚¬μ©μ2μ μ”μ²­μΌλ΅ μΈν•΄ λ°”λ€ λ°μ΄ν„°κ°€ μ΅°νλ¨)
>
> A) λ©±λ“±μ€ μ™Έλ¶€ μ”μΈμΌλ΅ μΈν• λ¦¬μ†μ¤ λ³€κ²½κΉμ§€λ” κ³ λ ¤ν•μ§€ μ•λ”λ‹¤.



### π“μΊμ‹κ°€λ¥(Cacheable)

- μ‘λ‹µν• κ²°κ³Όλ¥Ό μΊμ‹ν•μ—¬ λ‹¤μ‹ μ‚¬μ©ν•΄λ„ λλ”κ°€?
- GET, HEAD μ •λ„λ§ μΊμ‹λ΅ μ‚¬μ©λκ³  μλ‹¤.
- POST, PATCHλ” λ³Έλ¬Έ λ‚΄μ©μ„ μΊμ‹ν•΄μ•Ό ν•λ”λ°, κµ¬ν„μ΄ μ‰½μ§€ μ•μ•„μ„ μ£Όλ΅ μ‚¬μ©λμ§€ μ•λ”λ‹¤.



## HTTP λ©”μ„λ“ ν™μ©

ν΄λΌμ΄μ–ΈνΈ π“± -> μ„λ²„π–¥οΈλ΅ λ°μ΄ν„° μ „μ†΅



ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— λ°μ΄ν„° λ³΄λ‚Ό λ• μ „λ‹¬λ°©μ‹μ€ ν¬κ² 2κ°€μ§€κ°€ μλ‹¤.

- μΏΌλ¦¬ νλΌλ―Έν„°
  - μ£Όλ΅ GETμ—μ„ μ‚¬μ©
  - κ²€μƒ‰μ–΄μ™€ κ°™μ€ μ •λ ¬ ν•„ν„°λ΅ μ‚¬μ©
- λ©”μ‹μ§€ λ°”λ””
  - POST, PUT, PATCH λ©”μ„λ“μ—μ„ μ‚¬μ©ν•λ‹¤.
  - νμ› κ°€μ…, μƒν’ μ£Όλ¬Έ λ“±μ— μ‚¬μ©ν•λ‹¤.



4κ°€μ§€ μμ‹

- μ •μ  λ°μ΄ν„°μ΅°ν

/static/start.jps μ™€ κ°™μ€ λ°μ΄ν„°λ¥Ό λ°›κ³  μ‹¶λ‹¤λ©΄ 

λ‹¨μν μΏΌλ¦¬ νλΌλ―Έν„° μ—†μ΄ GETμ”μ²­μ„ ν•λ©΄ λλ‹¤.

```
# μ”μ²­ λ©”μ‹μ§€
GET /static/start.jpg HTTP/1.1
Host: localhost:8080
```

```
# μ‘λ‹µ λ©”μ‹μ§€
HTTP/1.1 200 OK
Content-Type: image/jpeg
Content-Length: 34012

lkas23asdf2dsfginwienfi2....
```



- λ™μ  λ°μ΄ν„° μ΅°ν

```
# μ”μ²­ λ©”μ‹μ§€
GET /search?q=hello&hl=ko HTTP/1.1
Host: www.google.com
```

μ„λ²„λ” μΏΌλ¦¬ νλΌλ―Έν„°(q=hello&hl=ko)λ¥Ό κΈ°λ°μΌλ΅ λ¦¬μ†μ¤λ¥Ό ν•„ν„°ν•μ—¬ λ™μ μΌλ΅ μ²λ¦¬ν•λ‹¤.



- HTML Formμ„ ν†µν•΄ λ°μ΄ν„° μ „μ†΅

Post μ „μ†΅μ‹

```html
<form action="/save" method="post">
  <input type="text" name="username" />
  <input type="text" name="age" />
  <button type="submit">μ „μ†΅</button>	
</form>
```

μ›Ή λΈλΌμ°μ €κ°€ μƒμ„±ν• μ”μ²­ HTTP λ©”μ‹μ§€

```
POST /save HTTP/1.1
Host: localhost:800
Content-Type: applcation/x-www-form-urlencoded

username=kim&age=20
```



> Q) λ§μ•½ Form λ°μ΄ν„° μ „μ†΅μ‹ GetμΌλ΅ λ°”κΏ” μ „μ†΅ν•λ©΄ μ–΄λ–»κ² λ κΉ?
>
> A) μΏΌλ¦¬νλΌλ―Έν„°λ΅ λ°”κΎΈμ–΄ μ „μ†΅ν•λ‹¤.
>
> ```
> GET /save?username=kim&age=20 HTTP/1.1
> Host: localhost:8080
> ```

β οΈ GETμ„ λ¦¬μ†μ¤ λ³€κ²½μ΄ λ°μƒν•λ” κ³³μ—μ„ μ‚¬μ©ν•λ©΄ μ•λ¨!



- HTML Form μ „μ†΅ - νμΌμ „μ†΅(multipart/form-data)

```
<form action="/save" method="post" enctype="multipart/form-data">
  <input type="text" name="username" />
  <input type="text" name="age" />
  <input type="file" name="file1" />
  <button type="submit">μ „μ†΅</button>	
</form>
```

```
POST /save HTTP/1.1
Host: localhost:800
Content-Type: multipart/form-data; boundary=----XXX
Content-Length: 10457

--------XXX
Content-Disposition: form-data; name="username"
...
--------XXX
Content-Disposition: form-data; name="file1"; filename="intro.png"
Content-Type: image/png

1029239asdfsdf9werqsad9fdfaf...
```

- λ°”μ΄λ„λ¦¬ λ°μ΄ν„°μ™€ ν…μ¤νΈ λ°μ΄ν„°λ¥Ό ν•¨κ» μ „μ†΅ν•λ‹¤κ³  ν•μ—¬ **multipart** μ „μ†΅μ΄λΌκ³  ν•λ‹¤.

β οΈ HTML Form μ „μ†΅μ€ GETκ³Ό POSTλ§ μ§€μ›ν•λ‹¤.



## HTTP μ„¤κ³„ μμ‹

1. HTTP API - μ»¬λ ‰μ…

- POST κΈ°λ° λ“±λ΅

νμ› κ΄€λ¦¬ API μ κ³µ



2. HTTP API - μ¤ν† μ–΄

- PUT κΈ°λ° λ“±λ΅

μ •μ  μ»¨ν…μΈ  κ΄€λ¦¬, μ›κ²© νμΌ κ΄€λ¦¬



3. HTTP FORM

- μ›Ή νμ΄μ§€ νμ› κ΄€λ¦¬
- GET, POSTλ§ μ§€μ›



νμ› κ΄€λ¦¬ μ‹μ¤ν…μ„ μ„¤κ³„ν•λ‹¤κ³  κ°€μ •ν•μ.

- νμ› λ©λ΅ /members -> GET
- νμ› λ“±λ΅ /members -> POST
- νμ› μ΅°ν /members/{id} -> GET
- νμ› μμ • /members/{id} -> PATCH, PUT, POST
- νμ› μ‚­μ  /members/{id} -> DELETE



POST κΈ°λ° λ“±λ΅ vs PUT κΈ°λ° λ“±λ΅

POST

- ν΄λΌμ΄μ–ΈνΈλ” λ“±λ΅λ  λ¦¬μ†μ¤μ URIλ¥Ό λ¨λ¥Έλ‹¤.

- μ„λ²„λ” μƒλ΅ λ“±λ΅λ λ¦¬μ†μ¤ URIλ¥Ό μƒμ„±ν•΄μ¤€λ‹¤.

  ```
  HTTP/1.1 201 Created
  Location: /members/100
  ```

- μ»¬λ ‰μ… (Collection)
  - μ»¬λ ‰μ… λ¦¬μ†μ¤λ€ μ„μ—μ„ `/members`λ¥Ό μλ―Έ
  - μ΄λ¬ν• ν•μ‹μ„ μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬λΌκ³  ν•λ‹¤.
  - μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬ν•λ‹¤.

PUT

νμΌ κ΄€λ¦¬ μ‹μ¤ν…

- νμΌ λ©λ΅ /files -> GET
- νμΌ μ΅°ν /files/{filename} -> GET
- νμΌ λ“±λ΅ /files/{filename} -> PUT
- νμΌ μ‚­μ  /files/{filename} -> DELETE
- νμΌ λ€λ‰ λ“±λ΅ /files -> POST

- ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤ URIλ¥Ό μ•κ³  μμ–΄μ•Ό ν•λ‹¤.
  - νμΌ λ“±λ΅ /files/{filename} -> PUT
  - PUT /files/start.jpg
  - ν΄λΌμ΄μ–ΈνΈκ°€ μ§μ ‘ λ¦¬μ†μ¤μ URIλ¥Ό μ§€μ •ν•λ‹¤.
- μ¤ν† μ–΄ (Store)
  - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ μ €μ¥μ†
  - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬ν•¨
  - μ—¬κΈ°μ„ μ¤ν† μ–΄λ” /files



> Q.HTTP Form λ°©μ‹μΌλ΅λ” POST, GET λ§ μ‚¬μ© κ°€λ¥ν•λ‹¤λ©΄, μ‚­μ , μμ • APIλ” μ–΄λ–»κ² μ„¤κ³„ν•΄μ•Όν• κΉ?
>
> A. μ»¨νΈλ΅¤ URIλ¥Ό μ‚¬μ©ν•λ‹¤.
>
> - λ™μ‚¬(Verb)λ΅ λ λ¦¬μ†μ¤ κ²½λ΅λ¥Ό μ‚¬μ©ν•¨
> - λ¦¬μ†μ¤λ¥Ό λ³€κ²½ν•λ” λ¨λ“  μ‘μ—…(μƒμ„±, μμ •, μ‚­μ )λ” POSTλ΅ λ‘”λ‹¤.
> - μƒμ„±μ€ /new, μμ •μ€ /edit, μ‚­μ λ” /delete λ΅ μ„¤κ³„ν•λ‹¤.
> - μλ¥Ό λ“¤μ–΄, νμ› μμ • νΌμ€ GET /members/edit μΌλ΅ λ‘κ³ , νμ› μμ • APIλ¥Ό POST /members/{id}/edit λ΅ λ§μ¶”μ–΄ μ¤€λ‹¤.



## URI μ„¤κ³„ μΆ…λ¥ μ •λ¦¬

- λ¬Έμ„(Document)
  - λ‹¨μΌ κ°λ…(νμΌ ν•κ°, κ°μ²΄ μΈμ¤ν„΄μ¤, λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ”μ ν•λ‚μ ν–‰)
  - ex) /members/100, /files/star.jpg
- μ»¬λ ‰μ…(Collection)
  - μ„λ²„κ°€ κ΄€λ¦¬ν•λ” λ¦¬μ†μ¤ λ””λ ‰ν† λ¦¬
  - μ„λ²„κ°€ λ¦¬μ†μ¤μ URIλ¥Ό μƒμ„±ν•κ³  κ΄€λ¦¬
  - ex) /members
- μ¤ν† μ–΄(Store)
  - ν΄λΌμ΄μ–ΈνΈκ°€ κ΄€λ¦¬ν•λ” μμ› μ €μ¥μ†
  - ν΄λΌμ΄μ–ΈνΈκ°€ λ¦¬μ†μ¤μ URIλ¥Ό μ•κ³  κ΄€λ¦¬ν•¨
  - ex) /files
- μ»¨νΈλ΅¤λ¬(Controller), Control URI
  - λ¬Έμ„, μ»¬λ ‰μ…, μ¤ν† μ–΄ μ΄μ™Έμ ν”„λ΅μ„Έμ¤
  - λ™μ‚¬λ¥Ό μ§μ ‘ μ‚¬μ©
  - /members/{id}/delete







---

λ¨λ“  κ°λ°μλ¥Ό μ„ν• HTTP μ›Ή κΈ°λ³Έ μ§€μ‹ https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/dashboard

