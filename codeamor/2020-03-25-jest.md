# ğŸ¤¡**Jest**

![image](https://user-images.githubusercontent.com/65898889/112369946-25f1b700-8d20-11eb-9a0f-36a031da246f.png)

> Jestì˜ ë¡œê³ ëŠ” ê´‘ëŒ€ê°€ ì°©ìš©í•˜ê³  ìˆëŠ” ì‹ ë°œì…ë‹ˆë‹¤. (Jest: ë†ë‹´, Jester: ê´‘ëŒ€)

JestëŠ” ì‹¬í”Œí•¨ì— ì´ˆì ì„ ë‘” **ì¦ê±°ìš´** JavaScript í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

JestëŠ” Reactë¥¼ ê°œë°œí•œ í˜ì´ìŠ¤ë¶ì—ì„œ ë§Œë“¤ì–´ ì¡Œê³ ,

Babel, TypeScript, Node, React, Angular, Vue ë“± ë‹¤ì–‘í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° í”„ë ˆì„ì›Œí¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í˜ì´ìŠ¤ë¶, íŠ¸ìœ„í„°, ë‰´ìš• íƒ€ì„ì¦ˆ, ìŠ¤í¬í‹°íŒŒì´, ì—ì–´ë¹„ì•¤ë¹„, ì¸ìŠ¤íƒ€ê·¸ë¨ ë“± ìˆ˜ë§ì€ ê³³ì—ì„œ Jestë¥¼ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤.

## **Jestì˜ ìœ„ìƒ**

![image](https://user-images.githubusercontent.com/65898889/112372700-774f7580-8d23-11eb-8240-79135ac5c3c3.png)

JavaScript í…ŒìŠ¤íŒ… ë„êµ¬ ì¤‘ ë§Œì¡±ë„, í¥ë¯¸, ì‚¬ìš©ë„, ì¸ì§€ë„ì—ì„œ 1ìœ„ë¥¼ ì°¨ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.

# âœ¨**Jestì˜ ì² í•™**

JestëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œë² ì´ìŠ¤ì˜ ì •í™•ì„±ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ ê³ ì•ˆëœ ìë°”ìŠ¤í¬ë¦½íŠ¸ í…ŒìŠ¤íŠ¸ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.

ì ‘ê·¼ ê°€ëŠ¥í•˜ê³  ì¹œìˆ™í•˜ë©° ê¸°ëŠ¥ì´ í’ë¶€í•œ APIë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹ ë¥´ê²Œ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

JestëŠ” ë¬¸ì„œí™”ê°€ ì˜ ë˜ì–´ ìˆê³ , êµ¬ì„±ì´ ê±°ì˜ í•„ìš”í•˜ì§€ ì•Šìœ¼ë©°, ìš”êµ¬ ì‚¬í•­ì— ë§ê²Œ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

zero configuration(êµ¬ì„±ì— ëŒ€í•œ ê³µìˆ˜ë¥¼ ìµœì†Œí™”) ì² í•™ì„ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— ë³„ë„ì˜ ì„¤ì • ì—†ì´ ë¹ ë¥´ê²Œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

JestëŠ” í…ŒìŠ¤íŒ…ì„ **ì¦ê²ê²Œ** ë§Œë“¤ ê²ƒì…ë‹ˆë‹¤.

# âœ¨**ì„¤ì¹˜**

```
yarn add --dev jest

ë˜ëŠ”

npm install --save-dev jest
```

# âœ¨**ì‚¬ìš©ë²•**

## **ë§ì…ˆ í•¨ìˆ˜**

> func.js

```js
const func = {
  add: (num1, num2) => num1 + num2,
  makeUser: (name, age) => ({ name, age }),
};

module.exports = func;
```

> func.test.js

```js
const func = require("./func");

// í†µê³¼
test("1ì´ 1ì¸ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸", () => {
  expect(1).toBe(1);
});

// í†µê³¼
test("1 + 1ê°€ 2ì¸ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸", () => {
  expect(func.add(1, 1)).toBe(2);
});

// ì‹¤íŒ¨
test("1 + 1ì´ ê·€ìš”ë¯¸ì¸ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸", () => {
  expect(func.add(1, 1)).toBe("ê·€ìš”ë¯¸");
});
```

> í…ŒìŠ¤íŠ¸ ê²°ê³¼

![image](https://user-images.githubusercontent.com/65898889/112633034-3323b880-8e7c-11eb-82ec-e7f9585c90d9.png)

ì—¬ê¸°ì„œ toBeëŠ” ìˆ«ìë‚˜ ë¬¸ì ë“± ê¸°ë³¸ íƒ€ì… ê°’ì„ ë¹„êµí•  ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.
toBe()ì™€ ê°™ì€ í•¨ìˆ˜ë¥¼ Matcherë¼ê³  í•˜ëŠ”ë° Jestì—ì„œëŠ” ë‹¤ì–‘í•œ Matcherë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

# âœ¨**ìì£¼ ì“°ì´ëŠ” Matchers**

## **toEqual**

```js
// í†µê³¼
test("1 + 1ê°€ 2ì¸ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸", () => {
  expect(func.add(1, 1)).toBe(2);
});

// í†µê³¼
test("1 + 1ê°€ 2ì¸ì§€ í™•ì¸í•˜ëŠ” í…ŒìŠ¤íŠ¸", () => {
  expect(func.add(1, 1)).toEqual(2);
});
```

ê°ì²´ë‚˜ ë°°ì—´ì€ ì¬ê·€ì ìœ¼ë¡œ ëŒë©´ì„œ ê°’ì„ í™•ì¸í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— toEqualì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.
ê¹Šì€ ë¹„êµë¥¼ ìœ„í•´ toEqual ì´ ì•„ë‹Œ toStrictEqualë¡œ ëŒ€ì²´í•´ì•¼ í•©ë‹ˆë‹¤.

> func.js

```js
const func = {
  add: (num1, num2) => num1 + num2,
  makeUser: (name, age) => ({ name, age, gender: undefined }),
};

module.exports = func;
```

> func.test.js

```js
const func = require("./func");

// ì‹¤íŒ¨ (ê¹Šì€ ë¹„êµì— ì‹¤íŒ¨)
test("ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ ê°ì²´ë¥¼ ë°˜í™˜í•´ ì¤˜", () => {
  expect(func.makeUser("Sumin", 100)).toBe({
    name: "Sumin",
    age: 100,
  });
});

// í†µê³¼
test("ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ ê°ì²´ë¥¼ ë°˜í™˜í•´ ì¤˜", () => {
  expect(func.makeUser("Sumin", 100)).toEqual({
    name: "Sumin",
    age: 100,
  });
});

// ì‹¤íŒ¨ (gender í‚¤ ê°’ì´ ì—†ìŒ)
test("ì´ë¦„ê³¼ ë‚˜ì´ë¥¼ ì „ë‹¬ë°›ì•„ì„œ ê°ì²´ë¥¼ ë°˜í™˜í•´ ì¤˜", () => {
  expect(func.makeUser("Sumin", 100)).toStrictEqual({
    name: "Sumin",
    age: 100,
  });
});
```

## toBeNull

```js
// í†µê³¼
test("nullì€ nullì…ë‹ˆë‹¤.", () => {
  expect(null).toBeNull();
});
```

ë¹„ìŠ·í•œ ë§¥ë½ìœ¼ë¡œ toBeUndefined, toBeDefinedë„ ìˆìŠµë‹ˆë‹¤.

## toBeTruthy, toBeFalsy

```js
// í†µê³¼ (0ì€ JSì—ì„œ false)
test("0ì€ false ì…ë‹ˆë‹¤.", () => {
  expect(func.add(1, -1)).toBeFalsy();
});
```

## toBeGreaterThan, toBeGreaterThanOrEqual / toBeLessThan, toBeLessThanOrEqual

```js
// í†µê³¼
test("IDëŠ” 10ì ì´í•˜ì—¬ì•¼ í•©ë‹ˆë‹¤.", () => {
  const id = "codeamor";
  expect(id.length).toBeLessThanOrEqual(9);
});
```

## toBeCloseTo

```js
// í†µê³¼
test("0.1 + 0.2 = 0.3", () => {
  expect(func.add(0.1, 0.2)).toBeCloseTo(0.3);
});
```

JavaScriptì—ì„œëŠ” ë¬´í•œ ì†Œìˆ˜ë¥¼ ì •í™•í•˜ê²Œ ê³„ì‚°í•˜ì§€ ëª»í•©ë‹ˆë‹¤.

ì»´í“¨í„°ëŠ” ì´ì§„ë²•ì„ ì‚¬ìš©í•˜ê²Œ ë˜ëŠ”ë°, ì†Œìˆ˜ë¥¼ ì´ì§„ë²•ìœ¼ë¡œ ë°”ê¿€ ê²½ìš° ëª‡ëª‡ ê°’ì€ ë¬´í•œ ì†Œìˆ˜ê°€ ë˜ì–´ë²„ë ¤ì„œ ë’·ë¶€ë¶„ì„ ìë¥´ê³  í‘œí˜„í•˜ê²Œ ë©ë‹ˆë‹¤.

> toBeë¥¼ ì‚¬ìš©í•œ ê²½ìš°

![image](https://user-images.githubusercontent.com/65898889/112637335-61f05d80-8e81-11eb-9b2e-0b0713e283a5.png)

## toMatch

```js
// í†µê³¼
test("JavaScriptì— jë¼ëŠ” ë¬¸ìê°€ ìˆì„ê¹Œìš”?", () => {
  expect("JavaScript").toMatch(/j/i);
});
```

i í”Œë˜ê·¸ëŠ” ëŒ€ì†Œë¬¸ì êµ¬ë¶„ì„ í•˜ì§€ ì•Šë„ë¡ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤.

## toContain

```js
// í†µê³¼
test("ì‚¬ìš©ì ëª©ë¡ì— Suminì´ ìˆì„ê¹Œìš”?", () => {
  const user = "Sumin";
  const userList = ["Minsu", "Suzy", "Sumin"];
  expect(userList).toContain(user);
});
```

## toThrow

> func.js

```js
const func = {
  add: (num1, num2) => num1 + num2,
  makeUser: (name, age) => ({ name, age, gender: undefined }),
  throwErr: () => {
    throw new Error("this is error");
  },
};

module.exports = func;
```

> func.test.js

```js
const func = require("./func");

test("ì´ê±° ì—ëŸ¬ ë‚ ê¹Œìš”?", () => {
  expect(() => func.throwErr()).toThrow("this is terror");
});
```

ì´ ì™¸ì—ë„ ë‹¤ì–‘í•œ Matchers ê°€ ìˆìŠµë‹ˆë‹¤.
https://jestjs.io/docs/expect

# ë¹„ë™ê¸° ì½”ë“œ í…ŒìŠ¤íŒ…

> func.js

```js
const func = {
  add: (num1, num2) => num1 + num2,
  getName: (callback) => {
    const name = "Sumin";
    setTimeout(() => {
      callback(name);
    }, 3000);
  },
  getAge: () => {
    const age = 100;
    return new Promise((res, rej) => {
      setTimeout(() => {
        // resolve(ì´í–‰), reject(ì‹¤íŒ¨)ë¥¼ í…ŒìŠ¤íŒ… í•˜ê¸° ìœ„í•´ ë‘˜ ì¤‘ í•˜ë‚˜ë§Œ í™œì„±í™”.
        res(age);
        // rej("error");
      }, 3000);
    });
  },
};

module.exports = func;
```

> func.test.js

```js
const func = require("./func");

test("3ì´ˆ í›„ì— 100ì´ë¼ëŠ” ë‚˜ì´ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤", () => {
  // resolves (ì´í–‰)
  // í†µê³¼ (func.js ì—ì„œ res(age)ë¥¼ í™œì„±í™” ì‹œì¼°ì„ ë•Œ)
  return expect(func.getAge()).resolves.toBe(100);

  // rejects (ì‹¤íŒ¨)
  // í†µê³¼ (func.js ì—ì„œ rej("error")ë¥¼ í™œì„±í™” ì‹œì¼°ì„ ë•Œ)
  return expect(func.getAge()).rejects.toMatch("error");
});

// ìœ„ì˜ ì´í–‰ ì½”ë“œë¥¼ async awaitë¡œ ë¦¬íŒ©í† ë§
// í†µê³¼
test("3ì´ˆ í›„ì— 100ì´ë¼ëŠ” ë‚˜ì´ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤", async () => {
  await expect(func.getAge()).resolves.toBe(100);
});
```

# **í…ŒìŠ¤íŠ¸ ì „í›„ ì‘ì—…**

ëª¨ë“  í…ŒìŠ¤íŠ¸ì˜ ì „í›„ì— ì‹¤í–‰ë  ì½”ë“œëŠ” beforeAll(), AfterAll()ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

ê°œë³„ í…ŒìŠ¤íŠ¸(ì—¬ê¸°ì„œëŠ” í…ŒìŠ¤íŠ¸ê°€ ì™¸ë¶€, ë‚´ë¶€ ê°ê° í•˜ë‚˜ì§€ë§Œ)ì˜ ì „í›„ì— ì‹¤í–‰ë  ì½”ë“œëŠ” beforeEach(), afterAll()ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.

```js
const fn = require("./func");

beforeAll(() => console.log("ë°– beforeAll")); // 1
beforeEach(() => console.log("ë°– beforeAll")); // 2, 6
afterEach(() => console.log("ë°– afterEach")); // 4, 10
afterAll(() => console.log("ë°– afterAll")); // 11 (ë§ˆì§€ë§‰)

test("0 + 1 = 1", () => {
  console.log("ë°– test");
  expect(func.add(0, 1)).toBe(1); // 3
});

describe("ë‹¤ë¥¸ DBë¥¼ ìœ„í•œ í…ŒìŠ¤íŠ¸", () => {
  beforeAll(() => console.log("ì•ˆ beforeAll")); // 5
  beforeEach(() => console.log("ì•ˆ beforeAll")); // 7
  afterEach(() => console.log("ì•ˆ afterEach")); // 9
  afterAll(() => console.log("ì•ˆ afterAll")); // 10

  test("0 + 1 = 1", () => {
    console.log("ì•ˆ test");
    expect(func.add(0, 1)).toBe(1); // 8
  });
});
```

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ í˜¹ì€ íŠ¹ì • í…ŒìŠ¤íŠ¸ë¥¼ ì œì™¸í•œ í…ŒìŠ¤íŒ…

```js
const func = require("./fn");

let num = 0;
// í†µê³¼
test("0 ë”í•˜ê¸° 1ì€ 1", () => {
  expect(func.add(num, 1)).toBe(1);
});

test("0 ë”í•˜ê¸° 2ì€ 2", () => {
  expect(func.add(num, 1)).toBe(2);
});

test("0 ë”í•˜ê¸° 3ì€ 3", () => {
  expect(func.add(num, 3)).toBe(3);
  // ì•„ë˜ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ê¸° ìœ„í•œ ë³€ìˆ˜ ê°’ ì¬í• ë‹¹
  num = 999;
});

// ì‹¤íŒ¨
test("0 ë”í•˜ê¸° 4ì€ 4", () => {
  expect(func.add(num, 4)).toBe(4);
});

test.only("0 ë”í•˜ê¸° 4ì€ 4", () => {
  expect(func.add(num, 4)).toBe(4);
});
```

> í…ŒìŠ¤íŠ¸ ê²°ê³¼

![image](https://user-images.githubusercontent.com/65898889/112650220-8141b780-8e8e-11eb-890d-b5b233552bc4.png)

only ë§ê³ ë„ skipì„ ì‚¬ìš©í•˜ì—¬ ë‹¤ë¥¸ í…ŒìŠ¤íŠ¸ì— ì˜í–¥ì„ ì£¼ëŠ” í…ŒìŠ¤íŠ¸ë§Œì„ ê±´ë„ˆë›¸ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.

# ëª©(Mock) í•¨ìˆ˜ í…ŒìŠ¤íŒ…

ë°œí‘œ ì „ê¹Œì§€ ì¶”ê°€ ì‹œì¼œ ë†“ê² ìŠµë‹ˆë‹¤ ã…œã…œ

# Reference

[Jest ê³µì‹ ë¬¸ì„œ](https://jestjs.io/)

[Jest ê°•ì˜](https://www.youtube.com/watch?v=g4MdUjxA-S4&list=PLZKTXPmaJk8L1xCg_1cRjL5huINlP2JKt)
