# íšŒì‚¬ì—ì„œ LCK ìŠ¤ì½”ì–´ í™•ì¸í•˜ê¸°

ì–´ì œ LCK ì„œë¨¸ê°€ ì‹œìž‘ë˜ì—ˆëŠ”ë°ìš”. ðŸ·  
5ì‹œë¶€í„° ê²½ê¸°ë¥¼ ì‹œìž‘í•˜ì§€ë§Œ íšŒì‚¬ì— ìžˆì„ ì‹œê°„ì´ë¼ ì•„ì‰½ê²Œë„ ê²½ê¸°ë¥¼ ë³¼ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ì–´í° ê¼½ê³  ëª°ëž˜ ë“£ê¸°ì—” ë„ˆë¬´ í¥ë¯¸ë¡œì›Œì„œ ì¼ì´ ì†ì— ì•ˆìž¡ížˆê¸° ë•Œë¬¸ì—... ëˆ„ê°€ ì´ê¸°ë‚˜ ìŠ¤ì½”ì–´ë¼ë„ í™•ì¸í•˜ê³ ìž ì´ í”„ë¡œê·¸ëž¨ì„ ì œìž‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

## ì–´ë””ì„œ ì ìˆ˜ ì •ë³´ë¥¼ ê°€ì ¸ì™€ë³¼ê¹Œ?

![naver-lck](./image/check_lck_scores_at_your_company/1.png)

ë„¤ì´ë²„, ì•„í”„ë¦¬ì¹´ TV ë“± ì—¬ëŸ¬ í”Œëž«í¼ì—ì„œ ê²½ê¸°ë¥¼ ì¤‘ê³„í•´ì¤ë‹ˆë‹¤. ì €ëŠ” íŠ¸ìœ„ì¹˜ì—ì„œ ì£¼ë¡œ ì¤‘ê³„ë¥¼ ë³´ì§€ë§Œ ë„¤ì´ë²„ê°€ ì›¹ ìƒì—ì„œ ìŠ¤ì½”ì–´ë¥¼ ì œê³µí•˜ê¸° ë•Œë¬¸ì— ë„¤ì´ë²„ê°€ ì í•©í•  ê²ƒìœ¼ë¡œ íŒë‹¨í–ˆìŠµë‹ˆë‹¤.

[Naver Sports - eìŠ¤í¬íŠ¸&ê²Œìž„ - ë¦¬ê·¸ì˜¤ë¸Œë ˆì „ë“œ](https://sports.news.naver.com/esports/schedule/index.nhn?category=lol)ì— ê°€ë©´ ì˜¤ëŠ˜ ê²½ê¸°ì˜ ìŠ¤ì½”ì–´ë¥¼ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

## ì–´ë–»ê²Œ?

![inspect](./image/check_lck_scores_at_your_company/2.png)

ìœ„ ìŠ¤í¬ë¦°ìƒ·ì„ ë³´ë©´ elementì— ìŠ¤ì½”ì–´ì™€ íŒ€ ì´ë¦„ì´ ë“¤ì–´ìžˆëŠ” ê²ƒ ê°™ì§€ë§Œ ì›¹ í”„ë¡ íŠ¸ì—”ë“œì˜ ë°ì´í„°ëŠ” ì£¼ë¡œ DOMì´ ë¡œë“œëœ í›„ ë°”ê¿”ì§€ê¸° ë˜ë¯€ë¡œ ë³´ì´ëŠ” ê°’ì„ ë¯¿ìœ¼ë©´ ì•ˆë©ë‹ˆë‹¤. ì†ŒìŠ¤ ë³´ê¸°ë¥¼ í†µí•´ ìŠ¤ì½”ì–´ ë°ì´í„°ê°€ ì–´ë””ì— ìžˆëŠ”ì§€ ì •í™•ížˆ í™•ì¸í•´ì•¼í•©ë‹ˆë‹¤.

![view-source](./image/check_lck_scores_at_your_company/3.png)

í™•ì¸í•´ë³´ë©´ ì—­ì‹œ ì›í•˜ëŠ” ê°’ì´ ë“¤ì–´ìžˆì§€ ì•ŠìŠµë‹ˆë‹¤. ì•„ë‹Œ ê²½ìš°ë„ ìžˆì§€ë§Œ ëŒ€ë¶€ë¶„ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê°’ì€ scriptì— ìžˆìŠµë‹ˆë‹¤. `homeTeamName` ë¼ëŠ” í‚¤ì›Œë“œë¡œ ê²€ìƒ‰ì„ í•´ë³´ë©´ ì•„ëž˜ìª½ì— ìœ„ì¹˜í•œ script ë‚´ì— `scoreboardList` ë¼ëŠ” ë³€ìˆ˜ì— ì›í•˜ëŠ” ê°’ë“¤ì´ ë“¤ì–´ìžˆìŒì„ í™•ì¸í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤.

![script](./image/check_lck_scores_at_your_company/4.png)

ê°œë°œìžë¼ë©´ ëˆ„êµ¬ë‚˜ ì§ì‚¬ëž‘í•˜ëŠ” ì •ê·œí‘œí˜„ì‹ðŸ’•ì„ ì‚¬ìš©í•´ì„œ í•´ë‹¹ ê°’ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

```javascript
// index.js
const axios = require('axios');

async function fetchScore(url) {
  const { data } = await axios.get(url);
  const regex = /scoreboardModel\: (.*)/;
  const found = data.match(regex);
  const { scoreboardList } = JSON.parse(
    found[1].substring(0, found[1].length - 1)
  );
  const {
    homeTeamName,
    awayTeamName,
    homeTeamScore,
    awayTeamScore,
  } = scoreboardList[0];
  console.log(homeTeamName, awayTeamName, homeTeamScore, awayTeamScore);
}

fetchScore(
  'https://sports.news.naver.com/esports/schedule/index.nhn?category=lol'
);
```

```
node index.js
```

![terminal](./image/check_lck_scores_at_your_company/5.png)

ðŸ‘ðŸ‘ðŸ‘ðŸ‘ ì›í•˜ëŠ” ê°’ì´ ìž˜ ë‚˜ì˜µë‹ˆë‹¤. í•˜ì§€ë§Œ í•œê¸€ì´ ë‚˜ì˜¤ë©´ ì˜ì‹¬ìŠ¤ëŸ½ê¸° ë•Œë¬¸ì— [hangul-romanization](https://www.npmjs.com/package/hangul-romanization)ë¼ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ í•œê¸€ì„ ë¡œë§ˆìžë¡œ í‘œê¸°í•´ì¤ë‹ˆë‹¤. ê·¸ë¦¬ê³  ì¡°ê¸ˆ ë¡œê·¸ì²˜ëŸ¼ í¬ë§·ì„ ë°”ê¿”ì¤ë‹ˆë‹¤.

![formatting](./image/check_lck_scores_at_your_company/6.png)

ë‚˜ì˜ì§€ ì•Šë„¤ìš”. í•˜ì§€ë§Œ ê³„ì† ê°™ì€ ê°’ì„ ë³¼ í•„ìš”ëŠ” ì—†ê² ì£ ? [lodash](https://www.npmjs.com/package/lodash)ì˜ isEqual í•¨ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ê°’ì´ ë°”ë€ŒëŠ” ê²½ìš°ì—ë§Œ ë¡œê·¸ë¥¼ ì°ë„ë¡ í•´ì¤ë‹ˆë‹¤.

![6-19-score](./image/check_lck_scores_at_your_company/7.jpg)

ìœ„ ì‚¬ì§„ì€ 6ì›” 19ì¼ ê²½ê¸°ì˜ ìŠ¤ì½”ì–´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ëª¨ìŠµìž…ë‹ˆë‹¤. 5ì‹œ ë‹´ì›ê³¼ ìƒŒë“œë°•ìŠ¤ì˜ ê²½ê¸°ê°€ ì‹œìž‘ë˜ê³  5ì‹œ 38ë¶„ ì¯¤ ë‹´ì›ì´ ìŠ¹ë¦¬ë¥¼ ë”°ë‚¸ ê±¸ë¡œ ë³´ìž…ë‹ˆë‹¤. ê·¸ë¦¬ê³  ë‹¤ì‹œ 0:0 ìŠ¤ì½”ì–´ë¡œ ì°ížˆëŠ”ë° ë°ì´í„° ë™ê¸°í™”ê°€ ì œëŒ€ë¡œ ì•ˆ ëœê²ƒ ê°™ìŠµë‹ˆë‹¤. interval ì‹œê°„ì„ ì¢€ ëŠ˜ë ¤ë„ ë˜ê² êµ°ìš”. ë‹´ì›ì´ 2ë²ˆì§¸ ê²½ê¸°ë„ ìŠ¹ë¦¬ë¥¼ í•œê²ƒ ê°™ì€ë° ë°”ë¡œ ë‹¤ìŒ ê²½ê¸° ì •ë³´ë¡œ ë„˜ì–´ê°€ëŠ” ë°”ëžŒì— 2:0ìœ¼ë¡œ ì°ížˆëŠ” ë¶€ë¶„ë„ ì•ˆë‚˜ì˜¤ëŠ” ë¬¸ì œê°€ ìžˆë„¤ìš”......ã…Žã…Žã…Žã…Ž ì—­ì‹œ ì‹¤ì œë¡œ ì‹¤í–‰í•´ë³´ë‹ˆ ìˆ˜ì •í•´ì•¼ í•  ë¶€ë¶„ì´ ê½¤ ìžˆêµ°ìš”.

ì‚¬ì‹¤ ì €í¬ íšŒì‚¬ëŠ” ìžìœ ë¡œìš´ ë¶„ìœ„ê¸°ë¼ì„œ íšŒì‚¬ì—ì„œ ëª°ëž˜ ë³´ë ¤ëŠ” ëª©ì ë³´ë‹¨ ê°€ë” ìŠ¤ì½”ì–´ë§Œ í™•ì¸í•˜ê³  ì‹¶ì€ ì €ì˜ ë§ˆìŒì„ ë‹´ì•„ ê°„ë‹¨í•œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ìž‘ì„±í•´ë´¤ëŠ”ë° ìž¬ë¯¸ìžˆë„¤ìš”. ì„¤í•´ì›ì´ í•œí™”ë¥¼ ì´ê¸°ë‹¤ë‹ˆ.... ì´ìƒ ëª¨ë“  ê²½ê¸°ë¥¼ ì²˜ìŒë¶€í„° ëê¹Œì§€ ë³¼ ì²´ë ¥ì´ ì—†ëŠ” íšŒì‚¬ì›ì˜ ìŠ¬í”ˆ ì½”ë”©ì´ì—ˆìŠµë‹ˆë‹¤...

## ì „ì²´ ì½”ë“œ

```javascript
const axios = require('axios');
const romanization = require('hangul-romanization');
const _ = require('lodash');

let info = {
  homeTeamName: undefined,
  awayTeamName: undefined,
  homeTeamScore: undefined,
  awayTeamScore: undefined,
};

async function fetchScore(url) {
  const { data } = await axios.get(url);
  const regex = /scoreboardModel\: (.*)/;
  const found = data.match(regex);
  const { scoreboardList } = JSON.parse(
    found[1].substring(0, found[1].length - 1)
  );
  const {
    homeTeamName,
    awayTeamName,
    homeTeamScore,
    awayTeamScore,
  } = scoreboardList[0];
  const new_info = {
    homeTeamName,
    awayTeamName,
    homeTeamScore,
    awayTeamScore,
  };

  if (!_.isEqual(info, new_info)) {
    info = new_info;
    logScore(homeTeamName, awayTeamName, homeTeamScore, awayTeamScore);
  }
}

function logScore(homeTeamName, awayTeamName, homeTeamScore, awayTeamScore) {
  const date = new Date();
  const log = `[INFO] ${date.toISOString()} ${romanization.convert(
    homeTeamName
  )} ${homeTeamScore} : ${romanization.convert(
    awayTeamName
  )} : ${awayTeamScore}`;
  console.log(log);
}

setInterval(() => {
  fetchScore(
    'https://sports.news.naver.com/esports/schedule/index.nhn?category=lol'
  );
}, 1000);
```
