## 시작하기
**가상 면접 대규모 시스템 설계 기초 2**에서는 다양한 시스템 설계 문제를 다루며, 각 장은 실무에서 마주할 수 있는 다양한 상황과 그 해결 방법을 탐구할 수 있도록 구성되어 있습니다. 
핵심은 사례를 암기하는 것이 아니라, 실무에서 마주할 수 있는 서비스의 근본적인 문제를 분석하고 이를 해결하는 방법을 확장하는 데 있습니다.

## 훑어보기
- 1장에서 3장까지는 `지리적 위치 기반`의 관계성 데이터를 저장하고 서비스할 때 발생할 수 있는 문제를 중심으로 설명하며, 이를 통해 시스템 설계 시 고려해야 할 사항들을 다룹니다.

- 4장과 5장은 `메시지 큐`에 기반한 느슨하게 결합된 아키텍처를 어떻게 실무에 적용할 수 있는지 고민할 수 있도록 합니다.

- 6장에서는 `대량의 이벤트`를 제때 정확히 처리하기 위한 핵심 고려 사항을 다루며, 효율적인 이벤트 처리를 위한 방법을 탐구합니다.

- 7장은 `예약 시스템` 설계에서 마주할 수 있는 다양한 고민거리들을 다루며, 이를 해결하는 과정에서 고려해야 할 요소들을 제시합니다.

- 8장은 `이메일 서비스`를 주제로 전통적인 메일 서버의 한계와 분산 메일 서버 아키텍처를 설계할 때 고려할 사항을 설명합니다.

- 9장에서는 확장성 있는 클라우드 기반 `저장소 시스템`을 설계하는 접근 방법에 대해 논의합니다.

- 10장은 온라인 게임 서비스의 핵심 기술인` 랭킹 서비스`를 어떻게 설계할 수 있는지 고민해볼 수 있는 장입니다.

- 11장부터 13장까지는 `자금 흐름의 무결성`을 보장하는 시스템 설계에 대해 다루며, 이를 결제 시스템, 전자 지갑, 증권 거래소 등에서 어떻게 적용할 수 있는지를 설명합니다.

이러한 다양한 주제를 통해 서비스 설계 시 직면할 수 있는 근본적인 문제를 파악하고, 해결을 위한 올바른 접근 방법을 익히는 것에 초점을 맞춥니다. 특히, `모호한 영역`을 분석하고 단계적으로 문제를 해결해가는 능력을 키우는 것을 목표로 합니다.

시스템 설계에서 요구되는 **요구사항**, **제약사항**, **성능 병목 지점**을 파악하는 능력을 향상시키는 것이 주요 학습 목표입니다. 사례를 암기하기보다는, 시스템이 직면할 수 있는 문제를 어떻게 접근하고 해결할지에 대한 시야를 확장하는 것이 핵심입니다.

## 본문 들어가기

### 첫번째 접근 단계: 문제 이해 및 설계 범위 확정 단계

각 장의 첫 단계는 요구사항을 구체화하고 문제를 이해하기 위한 `문제이해 및 설계범위 확정 단계`입니다.
문제를 이해하기 위해 면접관과 소통하면서 구현해야할 **기능적인 요구사항을 정의**하고, 시스템의 특성에 따라 성능, 가용성, 확장성 같은 **비기능적인 요구사항을 정의**합니다. 

이 단계에서 요구사항을 구체화한 후, 시스템의 개략적인 **규모를 추정**합니다. 이를 바탕으로, 구현해야 할 기능적 요구사항에 대해 성능, 가용성, 확장성 등 비기능적 요구사항을 추정할 수 있습니다.

예를 들어, 동시 사용자 수를 가정하고, 서비스 사용 시나리오에 따라 QPS(초당 요청 수), TPS(초당 트랜잭션 수), 처리량(Throughput) 등으로 구체화하여 아키텍처 설계에 반영할 수 있습니다.

- 문제를 명확하게 정의하였는가?
- 시스템이 무엇을 구현해야하는지 명확하게 정의하였는가?
- 시스템이 어떻게 동작해야 하는지에 대해 논의되었는가?
- 시스템의 초기 규모를 파악하고, 트래픽의 패턴과 부하를 예측하였는가?
- 프로젝트의 설계 범위를 명확하게 설정하였는가?

** 결과적으로 첫번째 단계를 정리하면, 문제를 명확하게 정의하고 이를 해결하기 위해 요구사항과 설계의 범위를 확정하는 것입니다.
** 이러한 과정을 통해 시스템 설계를 위한 기초를 다질 수 있고, 이후 아키텍처 설계 및 최적화의 방향성을 제시 할 수 있습니다.

### 두 번째 접근 단계: 개략적 설계안 제시 및 동의 구하기

구체적으로 API를 설계하고 모델링을 진행하는 단계입니다. 이 단계는 실질적으로 서비스가 어떻게 동작할지에 대한 기본적인 뼈대를 구성하는 과정입니다.

먼저, 시스템의 핵심 기능을 바탕으로 API 엔드포인트를 설계하고, 데이터 모델링을 진행합니다.
각 API에서 처리할 데이터의 구조를 정의하고, 데이터가 관계형 데이터베이스(RDBMS)가 더 적합한지, 아니면 NoSQL 데이터베이스가 더 적합한지 고민하는 과정이 중요합니다. 이를 결정할 때 다음 요소를 고려해야 합니다.

API와 데이터 모델이 준비되면, 시스템 전체 아키텍처에 대한 개략적인 설계안을 제시합니다. 
이는 시스템의 주요 컴포넌트와 그 상호작용을 설명하는 단계로 주로 다이어그램을 통해 시각적으로 설명합니다.

- API가 요구사항을 충족하는가?
- 모델링이 적절한가?
- 전체 아키텍처가 효율적인가?

** 두 번째 단계를 정리하면, 구체적인 API 설계와 데이터 모델링을 진행하고, 이를 바탕으로 시스템의 개략적인 아키텍처를 설계하는 것입니다.
** 그 결과로 최소한의 기능을 구현하여, 기능적인 요구사항에 대한 피드백을 빠르게 받아볼 수 있도록 하는 것입니다.

### 세 번째 접근 단계: 상세 설계

개략적으로 설계된 아키텍처를 더 세부적으로 구체화 하는 단계입니다. 컴포넌트간의 상호작용 외에도 API와 데이터베이스 간의 상호작용 방식, 캐시 시스템의 도입 여부, 그리고 비동기 작업 처리 방안 등을 구체적으로 설계합니다.

시스템이 확장되고 트래픽이 증가함에 따라 성능을 유지할 수 있는 최적화 방안을 마련해야 합니다. 
트래픽 증가에 대비해 로드 밸런싱과 캐시 같은 전략을 통해 서버 부하를 효율적으로 분산하는 것이 중요합니다. 또한, 데이터베이스와 API 서버 간의 성능 최적화를 통해 확장성을 보장해야 합니다.

시스템은 언제든지 예기치 못한 오류나 장애에 직면할 수 있습니다. 이를 대비해 오류 처리 및 장애 복구 계획을 수립하는 것이 필수적입니다. 장애가 발생할 경우 서비스 중단을 최소화하기 위해 페일오버(Failover) 같은 복구 절차를 사전에 준비하고, 데이터를 안전하게 복구할 수 있는 백업 및 복구 방안을 마련해야 합니다.

기능적 이슈가 발생할 경우, 그 문제를 해결하는 과정도 필요합니다.

예를들면, 중복 요청에 대한 이슈(동시성 문제)를 해결 하는 방법이 있는지? DB 레벨에서 해결이 필요하다면, 락(Lock)을 활용할 수 있습니다. 비관적 락, 낙관적 락, 데이터베이스 제약조건 등의 방법론을 이해하고, 각 방법의 장단점을 분석해 최적의 선택을 할 수 있어야 합니다.

이런 내용들은 주제별 특성이 다르기 때문에 각 장에서 설명 하겠습니다.

### 마무리

요구사항을 수집하고, 이를 바탕으로 규모 추정을 통해 개략적인 시스템 아키텍처를 설계하였습니다. 
마지막으로 설계안을 바탕으로 상세한 분석을 진행하며, 놓친 부분이 있는지 다시 한 번 검토할 필요가 있습니다.

검토 과정에서 받은 피드백을 바탕으로 수정 내용을 기록하고, 그 수정 사항이 최선인지 다양한 방안을 고려해보는 시간이 필요합니다. 이렇게 함으로써 설계의 완성도를 높이고, 더 나은 해결책을 도출할 수 있는 기회를 얻을 수 있습니다.

