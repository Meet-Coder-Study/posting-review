**적절한 마이크로서비스를 도입하는 시기는 언제일까?**



지난 해 9월 트레바리로 이직하게 된 이유 중 높은 비중을 차지하는 부분은 바로 **마이크로서비스를 직접 구축할 수 있는 기회**가 있다. 라는 부분이 있었습니다. 그리고 이직 후 약 8개월이 지난 이 시점에 **'적절한 마이크로서비스를 도입하는 시기는 언제 일까?'** 을 고민하는 것은 뒷북일 수 있지만, 그럼에도 불구하고 고민해야하는 이유는 여전히 이 질문에 답을 할 수 없기 때문입니다.

---

1.
다우기술에 근무할 적 약 90만 라인이 자바 코드가 모듈형 모놀리스 아키텍쳐로서 운영되는 프로젝트를 약 2년 넘게 관리했었습니다. 이 방대한 코드 속에서 마이크로서비스가 말하는 모놀리스 아키텍쳐의 단점을 운이 좋게도 모두다 겪어볼 수 있었습니다.

- 약 2주에 한 번씩 배포 빈도를 가집니다.
- 코드가 심각하게 방대해, 도메인에 집중할 수 없어 스파게티 코드가 되는 깨진 유리창을 봐왔습니다.
- 코드가 방대해짐에 따라 테스트 코드는 더 이상 관리할 수 있는 대상이 될 수 없었습니다.
- 기술 선택에 있어서 언제나 난항이였습니다. 당시 JAVA 1.8을 사용했지만 , 11을 사용할 수 없었습니다. 이유는 사이드카로 같이 운용되는 솔루션이 JAVA1.8까지만 지원됐기 때문입니다.

이런 문제점을 격하게 겪으면서 자연스러워질때까지 몰라서 보이지 않던 단점이 마이크로서비스를 학습하게 되면서 보이게 되던군요.

--

이번에 마이크로서비스를 스터디를 되면서 다른 개발자분의 생각을 엿볼 수 있었습니다. 그 분들의 이야기를 가져와보면 다음과 같습니다.

**언제 마이크로서비스 를 도입하는 것이 적절한가?**

2.

지금이 마이크로서비스를 도입해야되는 시기라고 인지하고 있었다고 합니다. 그러나 마이크로서비스를 도입하기 위해서 알아야할 것이 많았다. 트랜잭션 관리부터 DB까지 고려해야될 부분이 많았고 이런 부분이 마이크로서비스를 도입하는 것을 방해하는 요소가 되어 도입할 수 없었다.

--

3.

'마이크로서비스를 도입하는 시기를 기다리고 있다. 아직 개발자가 많지 않고 빠르게 개발하기 위해서 모놀리스가 맞다. 그러나, 생산성이나 배포빈도가 늦어지는 현상을 겪는다면 그 때 마이크로서비스를 도입할 것이다'

--

4.

우리 회사에서는 마이크로서비스를 도입하는 리더가 3~4년차 개발자이다. 경험이 많은 개발자에 반해 마이크로서비스 자체에 대한 이해가 부족한 리더 때문에 잘못된 길을 걷고 있는 것으로 보인다. 마이크로서비스를 도입한다는 건 도박일 수도 있다는 생각이 든다.

--

여러 케이스에서 보이는 것과 같이 마이크로서비스를 도입하는 시기는 쉽게 답을 내리기 어려운 문제라 판단됩니다. 그럼에도 불구하고 저의 생각을 적어보려 합니다.


마이크로서비스 라는 것은 장점과 단점이 분명히 보인다고 생각합니다 심지어, 아주 살짝 마이크로서비스에 대한 학습을 하는 사람이라도 당장 알 수 있는 부분이라 생각합니다. 장점과 단점을 이미 알고 있다는 전제하에, 마이크로서비스를 도입 하는 시점은 **내 옆에 있는 팀원의 자세에 달려있다고 생각합니다**. 다시 말해, 내 옆에 있는 팀원과 더불어 팀이라 불리는 그 자체에 대한 성숙도(?) 태도(?)에 있다고 생각합니다.

트레바리에서 모놀리식 아키텍쳐를 마이크로서비스로 조금씩 전향해가면서 '이런 문제가 있는데, 이 문제를 어떻게 해결해야하지?' 라는 질문에 모든 동료가 악착같이 화이트보드 앞에 서서 함께 골똘히 고민하는 것. 이것이 곧 팀의 성숙도를 올라갈 수 있도록 해주는 장치가 되고 결과적으로, 마이크로서비스로 조금씩 전향해가는 과정에서도 서로를 믿을 수 있는 고리를 만들어 주는 것이 아닐까 싶습니다.



이전 다우기술에서도, 마이크로서비스 도입을 조심스러워하는 회사 등을 유심히 살펴보면 위에서 말하고자 하는 팀의 성숙도가 늘 장애물이 되는 것처럼 느꼈졌고, 이는 곧 '마이크로서비스 도입 불가능'이라는 결과물을 만들어내고 있는건 아닐까 싶습니다.

--

적절한 도입시점이 또 무엇이 있을까? 고민해보니 역시나 앞서 언급한 것과 비슷한 대답일 수 있는데, 내 옆에 있는 팀원과 나 그리고 팀 자체가 **마이크로서비스 패턴** 에 대해서 얼마나 잘 알고 있는가? 에 대해서도 중요한 결정요소가 될 수 있을 것 같습니다.



생각보다 **마이크로서비스 패턴** 은 단순하지만, 운영하는데 있어 많은 경험치를 필요로 하고 있습니다. 여기서 말하는 필요한 경험치를 모두가 공유할 수 있는 부분이라면 마이크로서비스를 도입하는 것에는 장애물이 없지 않을까? 라는 생각을 하게 됩니다. 실제로 근무하고 있는 트레바리에서도 이벤트 소싱이라는 패턴을 이해하기 위해 약 일주일간 동료들끼리 끊임없이 이야기하고 POC를 진행해보면서 패턴이 이해가 될 때까지 경험치를 쌓았습니다. 그 결과, 이제는 더 이상 이벤트 소싱이라는 단어에 대한 방해물이 존재할 수 없었습니다.
